add_executable(
    network_utils_test
    NetworkUtilsTest.cpp
    $<TARGET_OBJECTS:base_obj>
    $<TARGET_OBJECTS:network_obj>
    $<TARGET_OBJECTS:fs_obj>
)
target_link_libraries(
    network_utils_test
    ${THRIFT_LIBRARIES}
    wangle
    gtest
    folly
    glog
    gflags
    event
    ${COMPRESSION_LIBRARIES}
    double-conversion
    dl
    -pthread
)
add_test(NAME network_utils_test COMMAND network_utils_test)

add_executable(
    network_utils_bm
    NetworkUtilsBenchmark.cpp
    $<TARGET_OBJECTS:base_obj>
    $<TARGET_OBJECTS:network_obj>
    $<TARGET_OBJECTS:fs_obj>
)
target_link_libraries(
    network_utils_bm
    ${THRIFT_LIBRARIES}
    wangle
    follybenchmark
    folly
    glog
    gflags
    boost_regex
    event
    ${COMPRESSION_LIBRARIES}
    double-conversion
    dl
    -pthread
)
